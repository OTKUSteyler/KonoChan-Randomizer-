(function(i,r,s){"use strict";const c=async function(a){const o="https://konachan.com/post.json",t=a?"rating:explicit":"rating:safe",e=Math.floor(Math.random()*100);try{const n=await(await fetch(`${o}?tags=${t}&limit=1&page=${e}`)).json();return!Array.isArray(n)||n.length===0?null:n[0].file_url}catch(n){return console.error("[KonoChan Randomizer] Error fetching image:",n),null}},{sendBotMessage:d}=s.findByProps("sendBotMessage");let l=r.registerCommand({name:"konoSelf",displayName:"konoSelf",description:"Fetch a random image from KonoChan for yourself.",displayDescription:"Fetch a random image from KonoChan for yourself.",options:[{name:"nsfw",description:"Include NSFW content?",type:5,required:!1,displayName:"nsfw",displayDescription:"Include NSFW content?"}],execute:async function(a,o){const t=new Map(a.map(function(n){return[n.name,n]})).get("nsfw")?.value||!1,e=await c(t);if(!e){d(o.channel.id,"No image found. Try again later.");return}d(o.channel.id,`Here's your random image: ${e}`)},applicationId:"-1",inputType:1,type:1});const{sendBotMessage:m}=s.findByProps("sendBotMessage");let u=r.registerCommand({name:"konoSend",displayName:"konoSend",description:"Fetch a random image from KonoChan and send it to the channel.",displayDescription:"Fetch a random image from KonoChan and send it to the channel.",options:[{name:"nsfw",description:"Include NSFW content?",type:5,required:!1,displayName:"nsfw",displayDescription:"Include NSFW content?"}],execute:async function(a,o){const t=new Map(a.map(function(n){return[n.name,n]})).get("nsfw")?.value||!1,e=await c(t);if(!e){m(o.channel.id,"No image found. Try again later.");return}return{content:`Here's your random image: ${e}`}},applicationId:"-1",inputType:1,type:1});const p=function(){console.log("[KonoChan Randomizer] Plugin loaded!")},f=function(){l(),u(),console.log("[KonoChan Randomizer] Plugin unloaded!")};return i.onLoad=p,i.onUnload=f,i})({},vendetta.commands,vendetta.metro);
